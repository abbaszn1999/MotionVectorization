<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Motion Vectorization – Submit</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body { font-family: system-ui, Arial, sans-serif; margin: 20px; max-width: 760px; }
      .card { border: 1px solid #ddd; border-radius: 12px; padding: 16px; margin-bottom: 16px; }
      label { display:block; margin:8px 0 4px; }
      input[type="text"], input[type="number"], textarea { width:100%; padding:8px; border:1px solid #ccc; border-radius:8px;}
      button { padding:10px 16px; border:0; border-radius:10px; cursor:pointer; }
      .primary { background:#111; color:#fff; }
      .muted { color:#666; }
      pre { background:#f7f7f7; padding:12px; border-radius:8px; overflow:auto; }
    </style>
  </head>
  <body>
    <h1>Motion Vectorization – Submit</h1>
    <p class="muted">Phase 1 (dry-run): collects inputs and shows the JSON we'll send to the GPU in Phase 2.</p>

    <div class="card">
      <form id="jobForm">
        <label>Video file (optional)</label>
        <input type="file" name="video_file" accept="video/*" />

        <label>…or Video URL (optional)</label>
        <input type="text" name="video_url" placeholder="https://…/your.mp4" />

        <div style="display:flex; gap:12px;">
          <div style="flex:1">
            <label>start_frame</label>
            <input type="number" name="start_frame" value="0" />
          </div>
          <div style="flex:1">
            <label>max_frames</label>
            <input type="number" name="max_frames" value="120" />
          </div>
        </div>

        <label>Notes (optional)</label>
        <textarea name="notes" rows="3" placeholder="Anything to remember for this run…"></textarea>

        <div style="margin-top:12px;">
          <button class="primary" type="submit">Run (Dry-Run)</button>
        </div>
      </form>
    </div>

    <div id="result" class="card" style="display:none;">
      <h3>Queued</h3>
      <pre id="jsonOut"></pre>
    </div>

    <script>
      const form = document.getElementById('jobForm');
      const out = document.getElementById('jsonOut');
      const card = document.getElementById('result');

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const formData = new FormData(form);
        const res = await fetch('/submit', { method: 'POST', body: formData });
        const data = await res.json();
        card.style.display = 'block';
        out.textContent = JSON.stringify(data, null, 2);
      });
    </script>
  </body>
</html>